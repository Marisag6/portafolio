<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoShop - Productos Ecológicos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #2E8B57;
            --light-green: #7CBEA4;
            --dark-green: #1A4D2E;
            --soft-green: #E8F5E9;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f9f9f9;
        }
        
        .hero-bg {
            background: linear-gradient(rgba(46, 139, 87, 0.8), rgba(46, 139, 87, 0.6)), 
                        url('images/ecobombillo.png') center/cover;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(46, 139, 87, 0.2);
        }
        
        .cart-item {
            transition: all 0.3s ease;
        }
        
        .checkout-step {
            transition: all 0.4s ease-out;
        }
        
        /* Animaciones */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-green-800 flex items-center">
                <img src="images/ecoicono.png" alt="Logo EcoShop - Hoja verde estilizada con tonos esmeralda" class="mr-2" width="40" height="40" style="width:40px;height:40px;">
                EcoShop
            </a>
            
            <div class="flex items-center space-x-6">
                <a href="#products" class="text-gray-700 hover:text-green-600 transition">Productos</a>
                <a href="#about" class="text-gray-700 hover:text-green-600 transition">Nosotros</a>
                
                <!-- Carrito con contador -->
                <button id="cartBtn" class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 hover:text-green-600 transition" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <span id="cartCounter" class="absolute -top-2 -right-2 bg-green-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-bg text-white py-20 flex items-center">
        <div class="container mx-auto px-6 text-center fade-in">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">Productos Ecológicos para un Mundo Mejor</h1>
            <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto">Descubre artículos sostenibles que cuidan el planeta y mejoran tu vida diaria.</p>
            <a href="#products" class="bg-white text-green-800 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition duration-300 inline-block">Explorar Productos</a>
        </div>
    </section>
        <!-- Modal Carrito básico -->
        <div id="cartModal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-lg relative">
                <button id="closeCart" class="absolute top-4 right-4 text-green-700 hover:text-green-900 text-2xl font-bold">&times;</button>
                <h2 class="text-2xl font-bold text-green-800 mb-4">Tu Carrito</h2>
                <div id="cartItems" class="space-y-4 mb-6 overflow-y-auto" style="max-height:350px;">
                    <!-- Aquí se renderizan los productos del carrito -->
                </div>
                <div id="cartTotal" class="text-right font-bold text-green-700 mb-4"></div>
                <button id="checkoutBtn" class="w-full bg-green-700 text-white py-3 rounded-full font-bold hover:bg-green-800 transition">Finalizar compra</button>
            </div>
        </div>

        <!-- Modal Checkout -->
        <div id="checkoutModal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-lg relative">
                <button id="closeCheckout" class="absolute top-4 right-4 text-green-700 hover:text-green-900 text-2xl font-bold">&times;</button>
                <h2 class="text-2xl font-bold text-green-800 mb-4">Datos de Compra</h2>
                <form id="checkoutForm" class="space-y-4">
                    <input type="text" name="nombre" placeholder="Nombre completo" required class="w-full border rounded px-4 py-2">
                    <input type="email" name="email" placeholder="Correo electrónico" required class="w-full border rounded px-4 py-2">
                    <input type="text" name="direccion" placeholder="Dirección de entrega" required class="w-full border rounded px-4 py-2">
                    <select name="metodo" id="metodoPago" required class="w-full border rounded px-4 py-2">
                        <option value="">Método de pago</option>
                        <option value="tarjeta">Tarjeta de crédito/débito</option>
                        <option value="transferencia">Transferencia bancaria</option>
                        <option value="efectivo">Pago en efectivo</option>
                    </select>
                    <div id="pagoCampos" class="space-y-2"></div>
                    <button type="button" id="previewFacturaBtn" class="w-full bg-green-600 text-white py-3 rounded-full font-bold hover:bg-green-700 transition">Ver factura</button>
                    <button type="submit" id="confirmarPagoBtn" class="w-full bg-green-700 text-white py-3 rounded-full font-bold hover:bg-green-800 transition mt-2 hidden">Imprimir factura PDF</button>
                </form>
            </div>
        </div>

        <!-- Modal Factura Preview -->
        <div id="facturaModal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-md relative">
                <button id="closeFactura" class="absolute top-4 right-4 text-green-700 hover:text-green-900 text-2xl font-bold">&times;</button>
                <h2 class="text-2xl font-bold text-green-800 mb-4">Factura de Compra</h2>
                <div id="facturaPreview" class="bg-green-50 rounded-lg p-4 text-gray-800 text-sm"></div>
                <button id="volverCheckoutBtn" class="w-full bg-gray-200 text-green-800 py-2 rounded-full font-bold hover:bg-gray-300 transition mt-4">Volver</button>
                <button id="confirmarPagoBtnModal" class="w-full bg-green-700 text-white py-3 rounded-full font-bold hover:bg-green-800 transition mt-2">Imprimir factura PDF</button>
            </div>
        </div>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-6 py-12">
        <!-- Productos -->
        <section id="products" class="mb-20">
            <h2 class="text-3xl font-bold text-green-800 mb-10 text-center">Nuestros Productos</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Producto 1 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/kit.jpeg" alt="Kit de productos de limpieza ecológicos en botellas de vidrio con etiquetas verdes" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Kit Limpieza Eco</h3>
                        <p class="text-gray-600 mb-3">Set completo para limpieza del hogar sin químicos dañinos.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$24.99</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="1" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                
                <!-- Producto 2 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/botella.jpeg" alt="Botella de agua reutilizable de acero inoxidable con diseño moderno y cepillo limpiador" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Botella Reutilizable</h3>
                        <p class="text-gray-600 mb-3">Mantén tus bebidas frías o calientes por horas.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$18.99</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="2" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                
                <!-- Producto 3 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/vasos.jpeg" alt="Set de cubiertos de bambú para viaje en estuche de tela orgánica" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Cubiertos de Bambú</h3>
                        <p class="text-gray-600 mb-3">Alternativa sostenible a los cubiertos desechables.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$15.50</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="3" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                
                <!-- Producto 4 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/bolsas.jpeg" alt="Bolsa de compras plegable de algodón orgánico con estampado de hojas" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Bolsa Reutilizable</h3>
                        <p class="text-gray-600 mb-3">Fuerte, ligera y perfecta para tus compras diarias.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$12.99</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="4" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                <!-- Producto 5 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/ecobombillo.png" alt="Bombillo LED ecológico de bajo consumo" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Bombillo LED Eco</h3>
                        <p class="text-gray-600 mb-3">Ahorra energía con iluminación eficiente y ecológica.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$9.99</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="5" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                <!-- Producto 6 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/jabones.jpeg" alt="Jabón ecológico en barra con ingredientes naturales" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Jabón Natural</h3>
                        <p class="text-gray-600 mb-3">Limpieza suave y sostenible para tu piel.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$6.50</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="6" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                <!-- Producto 7 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/cepillo.jpeg" alt="Cepillo de dientes de bambú ecológico" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Cepillo de Bambú</h3>
                        <p class="text-gray-600 mb-3">Cuida tu sonrisa y el planeta con materiales biodegradables.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$4.99</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="7" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
                <!-- Producto 8 -->
                <div class="product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300">
                    <div class="product-image h-48 overflow-hidden">
                        <img src="images/kit.jpeg" alt="Filtro de agua portátil ecológico" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-semibold text-green-800 mb-2">Filtro de Agua Eco</h3>
                        <p class="text-gray-600 mb-3">Purifica agua de manera sostenible en cualquier lugar.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-bold text-lg">$19.99</span>
                            <button class="add-to-cart bg-green-100 text-green-800 px-4 py-2 rounded-full hover:bg-green-200 transition" data-id="8" onclick="addToCart()">Agregar</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Sobre Nosotros -->
        <section id="about" class="bg-green-50 rounded-xl p-8 mb-20">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-green-800 mb-6">Nuestra Misión</h2>
                <p class="text-lg text-gray-700 mb-6">
                    En EcoShop nos comprometemos con el medio ambiente ofreciendo productos sostenibles que reducen tu huella ecológica. Cada artículo en nuestra tienda ha sido cuidadosamente seleccionado por su impacto positivo en el planeta.
                </p>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="text-green-600 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-green-800">Calidad</h3>
                        <p class="text-gray-600">Productos duraderos y funcionales hechos con materiales sostenibles.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="text-green-600 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-green-800">Precios Justos</h3>
                        <p class="text-gray-600">Costos accesibles que apoyan a productores responsables.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <div class="text-green-600 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-green-800">Confianza</h3>
                        <p class="text-gray-600">Transparencia en nuestros procesos y materiales.</p>
                    </div>
                </div>
            </div>
    </main>
    
    <script>
    // Actualiza el contador del carrito en el header
    function updateCartCounter() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById('cartCounter').textContent = totalItems;
    }

    // Carrito básico: agregar, mostrar y eliminar productos
    function addToCart(event) {
        const btn = event.currentTarget;
        const productId = btn.getAttribute('data-id');
        let productName = btn.parentElement.parentElement.querySelector('h3').textContent;
        let productPrice = btn.parentElement.querySelector('span').textContent.replace('$', '');
        const product = { id: productId, name: productName, price: parseFloat(productPrice), quantity: 1 };

        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const index = cart.findIndex(item => item.id === product.id);
        if (index !== -1) {
            cart[index].quantity += 1;
        } else {
            cart.push(product);
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCounter();
    }

    document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.onclick = null;
        btn.addEventListener('click', addToCart);
    });

    // Mostrar/ocultar modal carrito and checkout
    document.addEventListener('DOMContentLoaded', function() {
        const cartBtn = document.getElementById('cartBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const checkoutModal = document.getElementById('checkoutModal');
        const closeCheckout = document.getElementById('closeCheckout');
        if (cartBtn && cartModal && closeCart) {
            cartBtn.onclick = function() {
                renderCart();
                cartModal.classList.remove('hidden');
            };
            closeCart.onclick = function() {
                cartModal.classList.add('hidden');
            };
        }
        if (checkoutBtn && checkoutModal && cartModal) {
            checkoutBtn.onclick = function() {
                cartModal.classList.add('hidden');
                checkoutModal.classList.remove('hidden');
            };
        }
        if (closeCheckout && checkoutModal) {
            closeCheckout.onclick = function() {
                checkoutModal.classList.add('hidden');
            };
        }
        updateCartCounter(); // Inicializa el contador al cargar la página
    });

    // Renderizar productos en el carrito
    function renderCart() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartItems = document.getElementById('cartItems');
        cartItems.innerHTML = '';
        cart.forEach(item => {
            cartItems.innerHTML += `
                <div class="flex items-center gap-4 cart-item bg-green-50 rounded-lg p-3">
                    <div class="flex-1">
                        <div class="font-semibold text-green-800">${item.name}</div>
                        <div class="text-sm text-gray-600">$${item.price.toFixed(2)} x ${item.quantity}</div>
                    </div>
                    <button class="remove-item bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold hover:bg-red-200 transition" data-id="${item.id}">Eliminar</button>
                </div>
            `;
        });
        // Eliminar producto del carrito
        document.querySelectorAll('.remove-item').forEach(btn => {
            btn.addEventListener('click', function() {
                removeFromCart(btn.getAttribute('data-id'));
            });
        });
    }

    function removeFromCart(id) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart = cart.filter(item => item.id !== id);
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
        updateCartCounter();
    }

    // Campos dinámicos según método de pago
    document.getElementById('metodoPago').addEventListener('change', function(e) {
        const pagoCampos = document.getElementById('pagoCampos');
        pagoCampos.innerHTML = '';
        if (e.target.value === 'tarjeta') {
            pagoCampos.innerHTML = `
                <input type="text" name="numtarjeta" placeholder="Número de tarjeta" required class="w-full border rounded px-4 py-2">
                <input type="text" name="nombreTarjeta" placeholder="Nombre en la tarjeta" required class="w-full border rounded px-4 py-2">
                <input type="text" name="expiracion" placeholder="MM/AA" required class="w-full border rounded px-4 py-2">
                <input type="text" name="cvv" placeholder="CVV" required class="w-full border rounded px-4 py-2">
            `;
        } else if (e.target.value === 'transferencia') {
            pagoCampos.innerHTML = `
                <input type="text" name="banco" placeholder="Banco" required class="w-full border rounded px-4 py-2">
                <input type="text" name="numcuenta" placeholder="Número de cuenta" required class="w-full border rounded px-4 py-2">
                <input type="text" name="titular" placeholder="Titular de la cuenta" required class="w-full border rounded px-4 py-2">
            `;
        }
    });

    // Vista previa de factura
    document.getElementById('previewFacturaBtn').addEventListener('click', function() {
        const form = document.getElementById('checkoutForm');
        const nombre = form.nombre.value;
        const email = form.email.value;
        const direccion = form.direccion.value;
        const metodo = form.metodo.value;
        let pagoExtra = '';
        if (metodo === 'tarjeta') {
            pagoExtra = `<b>Tarjeta:</b> ${form.numtarjeta.value}<br><b>Nombre:</b> ${form.nombreTarjeta.value}<br><b>Expiración:</b> ${form.expiracion.value}<br><b>CVV:</b> ${form.cvv.value}`;
        } else if (metodo === 'transferencia') {
            pagoExtra = `<b>Banco:</b> ${form.banco.value}<br><b>Cuenta:</b> ${form.numcuenta.value}<br><b>Titular:</b> ${form.titular.value}`;
        }
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        let total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        let productosHtml = cart.map(item => `<li>${item.name} x${item.quantity} ($${item.price.toFixed(2)} c/u)</li>`).join('');
        let facturaHtml = `
            <div class='flex items-center mb-2'>
                <img src='images/ecoicono.png' alt='EcoShop Icono' class='w-10 h-10 mr-2 rounded shadow'>
                <h3 class='font-bold text-green-700 text-xl'>EcoShop - Factura de Compra</h3>
            </div>
            <div><b>Nombre:</b> ${nombre}</div>
            <div><b>Email:</b> ${email}</div>
            <div><b>Dirección:</b> ${direccion}</div>
            <div><b>Método de pago:</b> ${metodo}</div>
            ${pagoExtra ? `<div class='mt-2'>${pagoExtra}</div>` : ''}
            <div class='mt-2'><b>Productos:</b></div>
            <ul class='list-disc ml-6'>${productosHtml}</ul>
            <div class='mt-2 font-bold text-green-800'>Total: $${total.toFixed(2)}</div>
        `;
        
        // Mostrar modal de factura
        document.getElementById('facturaPreview').innerHTML = facturaHtml;
        document.getElementById('facturaModal').classList.remove('hidden');
        document.getElementById('checkoutModal').classList.add('hidden');
    });

    // Botón volver al checkout desde factura
    document.getElementById('volverCheckoutBtn').addEventListener('click', function() {
        document.getElementById('facturaModal').classList.add('hidden');
        document.getElementById('checkoutModal').classList.remove('hidden');
    });

    // Botón cerrar factura
    document.getElementById('closeFactura').addEventListener('click', function() {
        document.getElementById('facturaModal').classList.add('hidden');
        document.getElementById('checkoutModal').classList.remove('hidden');
    });

    // Botón imprimir factura PDF desde modal factura
    document.getElementById('confirmarPagoBtnModal').addEventListener('click', function() {
        // Obtener datos del formulario
        const form = document.getElementById('checkoutForm');
        const nombre = form.nombre.value;
        const email = form.email.value;
        const direccion = form.direccion.value;
        const metodo = form.metodo.value;
        let pagoExtra = '';
        if (metodo === 'tarjeta') {
            pagoExtra = `Tarjeta: ${form.numtarjeta.value}\nNombre: ${form.nombreTarjeta.value}\nExpiración: ${form.expiracion.value}\nCVV: ${form.cvv.value}`;
        } else if (metodo === 'transferencia') {
            pagoExtra = `Banco: ${form.banco.value}\nCuenta: ${form.numcuenta.value}\nTitular: ${form.titular.value}`;
        }
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        let total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

        // Cargar logo como base64
        const logoImg = new Image();
        logoImg.src = 'images/ecoicono.png';
        logoImg.onload = function() {
            const canvas = document.createElement('canvas');
            canvas.width = 40; // tamaño fijo para el icono
            canvas.height = 40;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(logoImg, 0, 0, 40, 40);
            const logoBase64 = canvas.toDataURL('image/png');

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.addImage(logoBase64, 'PNG', 15, 10, 20, 20);
            doc.setFont('helvetica');
            doc.setFontSize(18);
            doc.text('EcoShop - Factura de Compra', 40, 20);
            doc.setFontSize(12);
            doc.text(`Nombre: ${nombre}`, 15, 40);
            doc.text(`Email: ${email}`, 15, 47);
            doc.text(`Dirección: ${direccion}`, 15, 54);
            doc.text(`Método de pago: ${metodo}`, 15, 61);
            if (pagoExtra) {
                doc.text(pagoExtra, 15, 68);
            }
            let y = pagoExtra ? 80 : 70;
            doc.text('Productos:', 15, y);
            y += 7;
            cart.forEach(item => {
                doc.text(`- ${item.name} x${item.quantity} ($${item.price.toFixed(2)} c/u)`, 20, y);
                y += 7;
            });
            doc.text(`Total: $${total.toFixed(2)}`, 15, y + 5);
            doc.save('factura_ecoshop.pdf');

            // Limpiar carrito y cerrar modal
            localStorage.removeItem("cart");
            updateCartCounter();
            document.getElementById('facturaModal').classList.add('hidden');
            alert('¡Gracias por tu compra! Tu factura se ha descargado en PDF.');
        };
    });

    // Factura PDF al confirmar pago con logo
    document.getElementById('checkoutForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        const nombre = form.nombre.value;
        const email = form.email.value;
        const direccion = form.direccion.value;
        const metodo = form.metodo.value;
        let pagoExtra = '';
        if (metodo === 'tarjeta') {
            pagoExtra = `Tarjeta: ${form.numtarjeta.value}\nNombre: ${form.nombreTarjeta.value}\nExpiración: ${form.expiracion.value}\nCVV: ${form.cvv.value}`;
        } else if (metodo === 'transferencia') {
            pagoExtra = `Banco: ${form.banco.value}\nCuenta: ${form.numcuenta.value}\nTitular: ${form.titular.value}`;
        }
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        let total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

        // Cargar logo como base64
        const logoImg = new Image();
        logoImg.src = 'images/ecoicono.png';
        logoImg.onload = function() {
            const canvas = document.createElement('canvas');
            canvas.width = logoImg.width;
            canvas.height = logoImg.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(logoImg, 0, 0);
            const logoBase64 = canvas.toDataURL('image/png');

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.addImage(logoBase64, 'PNG', 15, 10, 20, 20);
            doc.setFont('helvetica');
            doc.setFontSize(18);
            doc.text('EcoShop - Factura de Compra', 40, 20);
            doc.setFontSize(12);
            doc.text(`Nombre: ${nombre}`, 15, 40);
            doc.text(`Email: ${email}`, 15, 47);
            doc.text(`Dirección: ${direccion}`, 15, 54);
            doc.text(`Método de pago: ${metodo}`, 15, 61);
            if (pagoExtra) {
                doc.text(pagoExtra, 15, 68);
            }
            let y = pagoExtra ? 80 : 70;
            doc.text('Productos:', 15, y);
            y += 7;
            cart.forEach(item => {
                doc.text(`- ${item.name} x${item.quantity} ($${item.price.toFixed(2)} c/u)`, 20, y);
                y += 7;
            });
            doc.text(`Total: $${total.toFixed(2)}`, 15, y + 5);
            doc.save('factura_ecoshop.pdf');

            // Limpiar carrito y cerrar modal
            localStorage.removeItem("cart");
            updateCartCounter();
            document.getElementById('checkoutModal').classList.add('hidden');
            alert('¡Gracias por tu compra! Tu factura se ha descargado en PDF.');
        };
    });
    </script>
   
    <script>
    // Mostrar/ocultar modal carrito
    document.addEventListener('DOMContentLoaded', function() {
        const cartBtn = document.getElementById('cartBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        if (cartBtn && cartModal && closeCart) {
            cartBtn.onclick = function() {
                renderCart();
                cartModal.classList.remove('hidden');
            };
            closeCart.onclick = function() {
                cartModal.classList.add('hidden');
            };
        }
    });

    // Renderizar productos en el carrito
    function renderCart() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartItems = document.getElementById('cartItems');
        cartItems.innerHTML = '';
        let total = 0;
        cart.forEach(item => {
            // Buscar imagen del producto por nombre (simple)
            let imgSrc = '';
            if(item.name.includes('Kit')) imgSrc = 'images/kit.jpeg';
            else if(item.name.includes('Botella')) imgSrc = 'images/botella.jpeg';
            else if(item.name.includes('Cubiertos')) imgSrc = 'images/cepillo.jpeg';
            else if(item.name.includes('Bolsa')) imgSrc = 'images/cepillo.jpeg';
            else if(item.name.includes('Bombillo')) imgSrc = 'images/ecobombillo.png';
            else if(item.name.includes('Jabón')) imgSrc = 'images/kit.jpeg';
            else if(item.name.includes('Cepillo')) imgSrc = 'images/botella.jpeg';
            else if(item.name.includes('Filtro')) imgSrc = 'images/kit.jpeg';

            total += item.price * item.quantity;
            cartItems.innerHTML += `
                <div class="flex items-center gap-4 cart-item bg-green-50 rounded-lg p-3">
                    <img src="${imgSrc}" alt="${item.name}" class="w-12 h-12 rounded shadow">
                    <div class="flex-1">
                        <div class="font-semibold text-green-800">${item.name}</div>
                        <div class="text-sm text-gray-600">$${item.price.toFixed(2)} x ${item.quantity}</div>
                    </div>
                    <button class="remove-item bg-red-100 text-red-700 px-3 py-1 rounded-full font-bold hover:bg-red-200 transition" data-id="${item.id}">Eliminar</button>
                </div>
            `;
        });
        document.getElementById('cartTotal').textContent = `$${total.toFixed(2)}`;

        // Eliminar producto del carrito
        document.querySelectorAll('.remove-item').forEach(btn => {
            btn.addEventListener('click', function() {
                removeFromCart(btn.getAttribute('data-id'));
            });
        });
    }

    function removeFromCart(id) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart = cart.filter(item => item.id !== id);
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
        updateCartCounter();
    }
    </script>

     <!-- Footer -->
    <footer class="text-white py-12" style="background: linear-gradient(90deg, #1A4D2E 0%, #2E8B57 50%, #7CBEA4 100%);">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4" style="color:#E8F5E9;">EcoShop</h3>
                    <p style="color:#F3FFF3;">Tienda de productos ecológicos comprometida con un futuro sostenible.</p>
                    <p class="mt-2 text-sm" style="color:#CFFFE3;">&copy; EcoShop <span id="footerYear"></span>. Todos los derechos reservados.</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4" style="color:#E8F5E9;">Productos</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-green-200 transition" style="color:#F3FFF3;">Limpieza</a></li>
                        <li><a href="#" class="hover:text-green-200 transition" style="color:#F3FFF3;">Hogar</a></li>
                        <li><a href="#" class="hover:text-green-200 transition" style="color:#F3FFF3;">Cuidado Personal</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4" style="color:#E8F5E9;">Contacto</h3>
                    <ul class="space-y-2">
                        <li><span class="font-semibold" style="color:#CFFFE3;">Email:</span> <span style="color:#F3FFF3;">info@ecoshop.com</span></li>
                        <li><span class="font-semibold" style="color:#CFFFE3;">Tel:</span> <span style="color:#F3FFF3;">+1 234 567 890</span></li>
                        <li><span class="font-semibold" style="color:#CFFFE3;">Dirección:</span> <span style="color:#F3FFF3;">Calle Ecológica 123, Ciudad Verde</span></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4" style="color:#E8F5E9;">Síguenos</h3>
                    <div class="flex space-x-4 mt-2">
                        <a href="https://facebook.com" target="_blank" aria-label="Facebook" class="hover:text-green-200 transition">
                            <svg class="h-6 w-6" fill="#fff" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.593 0 0 .593 0 1.326v21.348C0 23.407.593 24 1.325 24h11.495v-9.294H9.691v-3.622h3.129V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.407 24 24 23.407 24 22.674V1.326C24 .593 23.407 0 22.675 0"/></svg>
                        </a>
                        <a href="https://instagram.com" target="_blank" aria-label="Instagram" class="hover:text-green-200 transition">
                            <svg class="h-6 w-6" fill="#fff" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.334 3.608 1.308.974.974 1.246 2.241 1.308 3.608.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.334 2.633-1.308 3.608-.974.974-2.241 1.246-3.608 1.308-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.334-3.608-1.308-.974-.974-1.246-2.241-1.308-3.608C2.013 5.668 2 6.077 2 12c0 5.923.013 6.332.072 7.612.059 1.282.292 2.394 1.272 3.374.981.981 2.093 1.213 3.374 1.272C8.332 23.987 8.741 24 12 24s3.668-.013 4.948-.072c1.281-.059 2.393-.291 3.374-1.272.98-.98 1.213-2.092 1.272-3.374.059-1.28.072-1.689.072-7.612 0-5.923-.013-6.332-.072-7.612-.059-1.282-.292-2.394-1.272-3.374-.981-.981-2.093-1.213-3.374-1.272C15.668.013 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"/></svg>
                        </a>
                        <a href="https://twitter.com" target="_blank" aria-label="Twitter" class="hover:text-green-200 transition">
                            <svg class="h-6 w-6" fill="#fff" viewBox="0 0 24 24"><path d="M24 4.557a9.93 9.93 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724c-.951.555-2.005.959-3.127 1.184A4.916 4.916 0 0 0 16.616 3c-2.717 0-4.92 2.206-4.92 4.917 0 .386.044.762.127 1.124C7.691 8.77 4.066 6.797 1.64 3.94c-.423.722-.666 1.561-.666 2.475 0 1.708.87 3.216 2.188 4.099a4.904 4.904 0 0 1-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.936 4.936 0 0 1-2.224.084c.627 1.956 2.444 3.377 4.6 3.418A9.867 9.867 0 0 1 0 21.543a13.94 13.94 0 0 0 7.548 2.209c9.058 0 14.009-7.513 14.009-14.009 0-.213-.005-.425-.014-.636A10.025 10.025 0 0 0 24 4.557z"/></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="mt-8 text-center text-sm" style="color:#CFFFE3;">
                <span>EcoShop &copy; <span id="footerYear2"></span> | Calle Ecológica 123, Ciudad Verde | info@ecoshop.com</span>
            </div>
        </footer>
    </body>    
</html>
